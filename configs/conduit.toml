# Matrix Conduit Configuration
# ArmorClaw Communication Stack

[global]
# Server identification
server_name = "matrix.armorclaw.com"

# Database (embedded SQLite for minimal memory)
database_path = "/var/lib/matrix-conduit/conduit.db"
database_backend = "sqlite"

# Performance tuning
max_request_size = 10_000_000  # 10 MB
max_concurrent_requests = 100
panic_threshold = 50

# Address to listen on
address = "0.0.0.0"
port = 6167

# Logging
log = "info"

# Matrix-specific settings
[global.matrix]
allow_registration = false  # Set to true for initial setup, then disable
allow_encryption = true
allow_federation = true
allow_check_for_updates = true

# Trusted servers (for federation)
[global.matrix.well_known]
client_url = "https://matrix.armorclaw.com"
server_url = "https://matrix.armorclaw.com:443"

# Media settings
[global.media]
# Media storage (embedded database)
media_backup_dir = "/var/lib/matrix-conduit/media_backup"
# Size limits
max_file_size = 10_000_000  # 10 MB
# URL preview
url_preview_enabled = true
url_preview_domain_contains_allowlist = []

# Presence settings
[global.presence]
presence_enabled = true
presence_timeout_idle_seconds = 300
presence_timeout_offline_seconds = 600

# Room directory
[global.room_dir]
# Search visibility for new rooms
search_visibility = true

# Conduit-specific settings
[conduit]
# Allow port checking by conduit
allow_check_for_updates = true
# Disable emergency password if not needed
# emergency_password = ""

# Database settings (SQLite-specific)
[sqlite]
# Connection pool size
pool_size = 5
# Busy timeout
busy_timeout = 30
