# Coturn TURN Server Configuration
# ArmorClaw Communication Stack

# Network listening
listening-port=3478
fingerprint
lt-cred-mech
realm=matrix.armorclaw.com

# STUN/TURN server name
server-name=turn.armorclaw.com

# External IP (set via environment in docker-compose)
# external-ip=YOUR_PUBLIC_IP

# Authentication
use-auth-secret
static-auth-secret=CHANGE_ME_IN_PRODUCTION_USE_LONG_RANDOM_STRING

# User database
userdb=/var/lib/coturn/turndb

# Logging
log-file=/var/log/coturn/turn.log
simple-log

# TLS
cert=/etc/nginx/ssl/fullchain.pem
pkey=/etc/nginx/ssl/privkey.pem
cipher-list="ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384"

# DTLS
dh-file=/etc/coturn/dhparam.pem

# Relay configuration
min-port=49152
max-port=65535

# Mobility (ICE)
keep-address-family

# CLI
no-cli
cli-port=0

# Loop detection
no-loop
no-multicast-peers

# Limits
total-quota=100
bps-capacity=3000000
max-bps=3000000

# STUN-only requests (no auth required)
no-stun

# Allow anonymous relay (disabled for security)
no-stun
anon-reject-allocation=true

# Realm restrictions
realm=matrix.armorclaw.com

# OAuth (optional, for future)
# oauth
# user-quota=0
